<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Will You Be My Valentine? ğŸ’•</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Dancing+Script:wght@500;700&family=Cormorant+Garamond:ital,wght@0,300;1,300;1,500&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --rose:#e8527a;
  --deep:#8b1a4a;
  --blush:#fce4ec;
  --cream:#fff8f3;
  --gold:#d4a84b;
  --text-dark:#3a0020;
}

html,body{
  width:100%;height:100%;
  font-family:'Cormorant Garamond',serif;
  overflow:hidden;
  background:#12000a;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen{
  position:fixed;inset:0;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  transition:opacity .8s ease, transform .8s ease;
  will-change:opacity,transform;
}
.screen.hidden{opacity:0;pointer-events:none;transform:scale(1.05)}
.screen.visible{opacity:1;pointer-events:all;transform:scale(1)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED BG GRADIENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.gradient-bg{
  position:absolute;inset:0;
  background:
    radial-gradient(ellipse at 20% 50%,#7b0e3d66,transparent 60%),
    radial-gradient(ellipse at 80% 20%,#c0395b44,transparent 55%),
    linear-gradient(135deg,#12000a 0%,#3d0025 50%,#1a000f 100%);
  z-index:0;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PARTICLES CANVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#particles{
  position:fixed;inset:0;
  pointer-events:none;
  z-index:1;
  overflow:hidden;
}
.p-heart{
  position:absolute;
  bottom:-40px;
  animation:floatUp linear infinite;
  opacity:0;
  font-size:1rem;
  user-select:none;
}
@keyframes floatUp{
  0%{transform:translateY(0) rotate(-10deg);opacity:0}
  10%{opacity:.7}
  90%{opacity:.3}
  100%{transform:translateY(-105vh) rotate(20deg);opacity:0}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 1 â€” PROPOSAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-ask{z-index:10}
#screen-ask .content{
  position:relative;z-index:2;
  text-align:center;
  padding:40px 30px;
  display:flex;flex-direction:column;align-items:center;gap:28px;
}

.bear-wrap{
  position:relative;
  animation:bearBounce 2.2s ease-in-out infinite;
}
@keyframes bearBounce{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-12px)}
}
.bear{font-size:clamp(5rem,14vw,8rem);filter:drop-shadow(0 8px 20px rgba(232,82,122,.4));line-height:1}

.question{
  font-family:'Playfair Display',serif;
  font-size:clamp(2rem,7vw,4.2rem);
  font-style:italic;
  font-weight:700;
  color:#fff;
  line-height:1.1;
  text-shadow:0 0 50px rgba(232,82,122,.5);
}
.question span{color:#f9a8c9}

.subtext{
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(1rem,3vw,1.3rem);
  font-style:italic;
  color:rgba(255,210,225,.7);
}

/* Buttons */
.btns{display:flex;gap:20px;align-items:center;flex-wrap:wrap;justify-content:center}

.btn-yes{
  padding:16px 52px;
  font-family:'Dancing Script',cursive;
  font-size:clamp(1.2rem,4vw,1.7rem);
  background:linear-gradient(135deg,var(--rose),var(--deep));
  color:#fff;
  border:none;border-radius:60px;
  cursor:pointer;
  box-shadow:0 6px 30px rgba(232,82,122,.5);
  transition:transform .25s,box-shadow .25s;
  letter-spacing:.04em;
}
.btn-yes:hover{transform:scale(1.08);box-shadow:0 12px 40px rgba(232,82,122,.7)}

.btn-no{
  padding:14px 38px;
  font-family:'Dancing Script',cursive;
  font-size:clamp(1rem,3vw,1.3rem);
  background:rgba(255,255,255,.07);
  color:rgba(255,200,215,.8);
  border:1.5px solid rgba(255,200,215,.3);
  border-radius:60px;
  cursor:pointer;
  transition:all .25s;
  letter-spacing:.04em;
  position:relative;/* for escape logic */
}
.btn-no:hover{background:rgba(255,255,255,.12);border-color:rgba(255,200,215,.5)}

/* wiggle the No button */
@keyframes wiggle{
  0%,100%{transform:rotate(0)}
  20%{transform:rotate(-6deg) scale(1.05)}
  40%{transform:rotate(6deg) scale(1.05)}
  60%{transform:rotate(-4deg)}
  80%{transform:rotate(4deg)}
}

/* No button grows smaller each escape to hint it's losing */
.btn-no{transition:all .18s ease, font-size .3s ease, padding .3s ease !important}

/* shrink helper classes */
.btn-no.sz1{font-size:1.1rem!important;padding:12px 30px!important}
.btn-no.sz2{font-size:0.95rem!important;padding:10px 22px!important}
.btn-no.sz3{font-size:0.8rem!important;padding:8px 16px!important}
.btn-no.sz4{font-size:0.65rem!important;padding:6px 12px!important}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 2 â€” ALREADY YES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-no{z-index:20}
#screen-no .content{
  position:relative;z-index:2;
  text-align:center;
  padding:40px 30px;
  display:flex;flex-direction:column;align-items:center;gap:24px;
}

.already-big{
  font-size:clamp(4rem,18vw,9rem);
  animation:spinZoom 0.7s cubic-bezier(.2,.8,.3,1.4) both, pulse2 2s .7s ease-in-out infinite;
  filter:drop-shadow(0 0 30px rgba(232,82,122,.8));
}
@keyframes spinZoom{
  0%{transform:scale(0) rotate(-180deg);opacity:0}
  100%{transform:scale(1) rotate(0);opacity:1}
}
@keyframes pulse2{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.12)}
}

.already-title{
  font-family:'Playfair Display',serif;
  font-size:clamp(2rem,7vw,4rem);
  font-style:italic;
  font-weight:700;
  color:#fff;
  text-shadow:0 0 40px rgba(232,82,122,.6);
}
.already-sub{
  font-family:'Dancing Script',cursive;
  font-size:clamp(1.1rem,4vw,1.8rem);
  color:var(--blush);
}
.confetti-msg{
  font-size:clamp(0.9rem,2.5vw,1.1rem);
  font-style:italic;
  color:rgba(255,200,215,.7);
}

.btn-continue{
  margin-top:10px;
  padding:15px 48px;
  font-family:'Dancing Script',cursive;
  font-size:clamp(1.1rem,3.5vw,1.5rem);
  background:linear-gradient(135deg,var(--rose),var(--deep));
  color:#fff;
  border:none;border-radius:60px;
  cursor:pointer;
  box-shadow:0 6px 28px rgba(232,82,122,.5);
  transition:transform .25s,box-shadow .25s;
  animation:fadeUp .6s 1s both;
}
.btn-continue:hover{transform:scale(1.07);box-shadow:0 10px 36px rgba(232,82,122,.7)}

/* confetti pieces */
.confetti-piece{
  position:fixed;
  width:8px;height:14px;
  border-radius:2px;
  animation:confettiFall linear forwards;
  z-index:30;
  pointer-events:none;
}
@keyframes confettiFall{
  0%{transform:translateY(-20px) rotate(0deg);opacity:1}
  100%{transform:translateY(110vh) rotate(720deg);opacity:0}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 3 â€” I LOVE YOU
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#screen-yes{z-index:10}
#screen-yes .content{
  position:relative;z-index:2;
  text-align:center;
  padding:40px 24px;
  display:flex;flex-direction:column;align-items:center;gap:20px;
  max-width:520px;width:100%;
}

/* Photo frame */
.photo-frame{
  position:relative;
  width:clamp(160px,40vw,220px);
  height:clamp(160px,40vw,220px);
  border-radius:50%;
  border:4px solid rgba(247,197,208,.5);
  box-shadow:
    0 0 0 8px rgba(232,82,122,.15),
    0 0 0 16px rgba(232,82,122,.07),
    0 20px 60px rgba(0,0,0,.5);
  overflow:hidden;
  animation:photoReveal .8s cubic-bezier(.2,.8,.3,1.2) both;
}
@keyframes photoReveal{
  0%{transform:scale(0) rotate(-15deg);opacity:0}
  100%{transform:scale(1) rotate(0);opacity:1}
}

/* â”€â”€â”€ REPLACE THIS IMAGE â”€â”€â”€ */
/* To change the photo: replace the background-image URL below,
   OR swap out the <img> src in the HTML further down */
.photo-frame img{
  width:100%;height:100%;
  object-fit:cover;
  display:block;
}

/* Dummy placeholder svg (delete this once you add a real photo) */
.photo-placeholder{
  width:100%;height:100%;
  display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  background:linear-gradient(135deg,#e8527a,#8b1a4a);
  color:#fff;gap:8px;
  font-family:'Dancing Script',cursive;
}
.photo-placeholder .ph-icon{font-size:3.5rem}
.photo-placeholder .ph-text{font-size:0.85rem;opacity:.8;text-align:center;padding:0 12px;line-height:1.5}

/* orbiting hearts around photo */
.orbit{
  position:absolute;inset:-20px;
  animation:spin 6s linear infinite;
  pointer-events:none;
}
.orbit-heart{
  position:absolute;font-size:.9rem;
  filter:drop-shadow(0 0 6px rgba(232,82,122,.7));
}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}

.love-title{
  font-family:'Playfair Display',serif;
  font-size:clamp(2.2rem,8vw,4rem);
  font-style:italic;
  font-weight:700;
  color:#fff;
  line-height:1.05;
  text-shadow:0 0 50px rgba(232,82,122,.5);
  animation:fadeUp .7s .3s both;
}
.love-title .heart-inline{
  color:#f9a8c9;
  animation:pulse 1.8s ease-in-out infinite;
  display:inline-block;
}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}

.love-msg{
  font-family:'Cormorant Garamond',serif;
  font-size:clamp(1rem,3vw,1.25rem);
  font-style:italic;
  color:rgba(255,210,225,.8);
  line-height:1.75;
  max-width:380px;
  animation:fadeUp .7s .5s both;
}

.signature{
  font-family:'Dancing Script',cursive;
  font-size:clamp(1.2rem,4vw,1.6rem);
  color:var(--blush);
  animation:fadeUp .7s .7s both;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes fadeUp{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}

/* rose deco corners */
.rose-corner{
  position:absolute;font-size:2rem;opacity:.25;user-select:none;
  animation:sway 4s ease-in-out infinite;
}
.rose-corner.tl{top:18px;left:18px;animation-delay:0s}
.rose-corner.tr{top:18px;right:18px;animation-delay:.6s;transform:scaleX(-1)}
.rose-corner.bl{bottom:18px;left:18px;animation-delay:1.2s}
.rose-corner.br{bottom:18px;right:18px;animation-delay:1.8s;transform:scaleX(-1)}
@keyframes sway{0%,100%{transform:rotate(-8deg)}50%{transform:rotate(8deg)}}
.rose-corner.tr,.rose-corner.br{display:none} /* avoid double */

/* mobile tweaks */
@media(max-width:480px){
  .btns{flex-direction:column;gap:14px}
  .btn-no{align-self:center}
}
</style>
</head>
<body>

<!-- Floating particles -->
<div id="particles"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 1 â€” THE ASK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen visible" id="screen-ask">
  <div class="gradient-bg"></div>
  <span class="rose-corner tl">ğŸŒ¹</span>
  <span class="rose-corner bl">ğŸŒ¸</span>

  <div class="content">
    <div class="bear-wrap">
      <div class="bear">ğŸ§¸</div>
    </div>

    <h1 class="question">Will you be<br><span>my Valentine?</span></h1>
    <p class="subtext">Every moment with you feels like a fairytale âœ¨</p>

    <div class="btns">
      <button class="btn-yes" id="btn-yes" onclick="handleYes()">
        ğŸ’– Yes!
      </button>
      <button class="btn-no" id="btn-no">
        No ğŸ™ˆ
      </button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 2 â€” "IT'S A YES" SURPRISE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen hidden" id="screen-no">
  <div class="gradient-bg"></div>

  <div class="content">
    <div class="already-big">ğŸ‰</div>
    <h2 class="already-title">It's a YES!</h2>
    <p class="already-sub">Your heart already knew ğŸ’•</p>
    <p class="confetti-msg">There's no escaping love, sweetheart~</p>
    <button class="btn-continue" onclick="goToLove()">
      Continue ğŸ’Œ
    </button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 3 â€” I LOVE YOU BABY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen hidden" id="screen-yes">
  <div class="gradient-bg"></div>
  <span class="rose-corner tl">ğŸŒ¹</span>
  <span class="rose-corner bl">ğŸŒ¸</span>

  <div class="content">
    <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         PHOTO AREA
         To replace: change the src="" inside the <img> tag below
         e.g. src="her-photo.jpg"  or an online URL
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div style="position:relative">
      <div class="photo-frame" id="photo-frame">

        <!-- â˜… REPLACE THIS IMAGE â˜…
             Change src to your photo path or URL.
             e.g.  src="photo.jpg"
                   src="https://example.com/her.jpg"
        -->
        <img
          src=""
          alt="My Valentine"
          id="valentine-photo"
          onerror="showPlaceholder()"
          onload="hidePlaceholder()"
          style="display:none"
        />

        <!-- Dummy placeholder â€” this disappears once you add a real photo -->
        <div class="photo-placeholder" id="photo-placeholder">
          <span class="ph-icon">ğŸ“¸</span>
          <span class="ph-text">Replace with<br>her photo ğŸ’•</span>
        </div>

      </div>

      <!-- orbiting hearts -->
      <div class="orbit">
        <span class="orbit-heart" style="top:0;left:50%;transform:translate(-50%,-50%)">ğŸ’—</span>
        <span class="orbit-heart" style="bottom:0;left:50%;transform:translate(-50%,50%)">ğŸ’•</span>
        <span class="orbit-heart" style="left:0;top:50%;transform:translate(-50%,-50%)">ğŸŒ¸</span>
        <span class="orbit-heart" style="right:0;top:50%;transform:translate(50%,-50%)">âœ¨</span>
      </div>
    </div>

    <h2 class="love-title">
      I love you,<br>baby <span class="heart-inline">ğŸ’–</span>
    </h2>
    <p class="love-msg">
      You are my favourite notification, my best reason to smile,
      and my most cherished person in the whole world. ğŸŒ¹
    </p>
    <p class="signature">â€” Always yours, forever ğŸ’Œ</p>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DETECT MOBILE vs DESKTOP
// On mobile there is no hover â€” finger touch fires touchstart instantly
// So we listen to touchstart (fires the MOMENT finger touches screen)
// which is BEFORE touchend (the actual "tap" completes)
// This means the button teleports away before the tap can register. ğŸ˜ˆ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const isMobile = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// PARTICLES
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ptcl = document.getElementById('particles');
const emojis = ['ğŸ’•','ğŸ’—','ğŸŒ¸','ğŸ’–','âœ¨','ğŸ’“','ğŸŒ¹','ğŸ’'];
function spawnParticle(){
  const el = document.createElement('div');
  el.className = 'p-heart';
  el.textContent = emojis[Math.floor(Math.random()*emojis.length)];
  el.style.left = Math.random()*100 + 'vw';
  el.style.fontSize = (Math.random()*.9+.6) + 'rem';
  el.style.animationDuration = (Math.random()*10+8) + 's';
  el.style.animationDelay = (Math.random()*4) + 's';
  ptcl.appendChild(el);
  setTimeout(()=>el.remove(), 20000);
}
for(let i=0;i<16;i++) setTimeout(spawnParticle, i*600);
setInterval(spawnParticle, 2200);

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// SCREENS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>{
    s.classList.add('hidden');
    s.classList.remove('visible');
  });
  const el = document.getElementById(id);
  el.classList.remove('hidden');
  el.classList.add('visible');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// NO BUTTON ESCAPE LOGIC
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let escapeCount = 0;
const MAX_ESCAPES = 5; // after this many escapes, force YES
const btnNo = document.getElementById('btn-no');

const labels = [
  'No ğŸ™ˆ',
  'Nope! ğŸ˜',
  'Still noâ€¦ ğŸ˜…',
  'Really?? ğŸ¥º',
  'Come on!! ğŸ˜­',
  'Okay fineâ€¦ ğŸ’•'
];

const sizeCls = ['','sz1','sz2','sz3','sz4'];

function getRandomPosition() {
  const margin = 24;
  const bw = btnNo.offsetWidth  || 120;
  const bh = btnNo.offsetHeight || 48;
  const maxX = window.innerWidth  - bw  - margin;
  const maxY = window.innerHeight - bh  - margin;
  // avoid landing directly on the YES button
  let rx, ry, attempts = 0;
  do {
    rx = Math.random() * maxX + margin/2;
    ry = Math.random() * maxY + margin/2;
    attempts++;
  } while(attempts < 10 && rx > window.innerWidth/2 - 100 && ry > window.innerHeight/2 - 60);
  return { x: rx, y: ry };
}

function teleportNo() {
  if(escapeCount >= MAX_ESCAPES) return;
  const {x, y} = getRandomPosition();
  btnNo.style.position = 'fixed';
  btnNo.style.left  = x + 'px';
  btnNo.style.top   = y + 'px';
  btnNo.style.zIndex = 50;
  // wiggle
  btnNo.style.animation = 'none';
  void btnNo.offsetWidth; // reflow
  btnNo.style.animation = 'wiggle 0.35s ease';

  escapeCount++;

  // update label
  btnNo.textContent = labels[Math.min(escapeCount, labels.length - 1)];

  // shrink the button progressively
  btnNo.classList.remove('sz1','sz2','sz3','sz4');
  if(escapeCount < sizeCls.length && sizeCls[escapeCount])
    btnNo.classList.add(sizeCls[escapeCount]);

  if(escapeCount >= MAX_ESCAPES) {
    // One last moment of hopeâ€¦ then force YES
    setTimeout(forceYes, 600);
  }
}

// â”€â”€ DESKTOP: dodge on mousemove near the button â”€â”€
if(!isMobile){
  // Track mouse globally â€” if cursor gets within ~60px of the No button, it runs
  document.addEventListener('mousemove', e => {
    if(escapeCount >= MAX_ESCAPES) return;
    const rect = btnNo.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top  + rect.height/2;
    const dist = Math.hypot(e.clientX - cx, e.clientY - cy);
    if(dist < 80) teleportNo();
  });
}

// â”€â”€ MOBILE: dodge on touchstart (fires BEFORE the tap lands) â”€â”€
if(isMobile){
  btnNo.addEventListener('touchstart', e => {
    e.preventDefault(); // prevent the tap from completing
    teleportNo();
  }, { passive: false });
}

// Fallback click â€” if somehow they click it on desktop
btnNo.addEventListener('click', e => {
  e.preventDefault();
  teleportNo();
});

function forceYes(){
  btnNo.style.display = 'none';
  fireConfetti();
  showScreen('screen-no');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// YES BUTTON
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function handleYes(){
  fireConfetti();
  showScreen('screen-no');
}

function goToLove(){
  showScreen('screen-yes');
  fireConfetti(30);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// CONFETTI
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const confettiColors = ['#e8527a','#f9a8c9','#d4a84b','#ffffff','#8b1a4a','#fce4ec','#c084fc'];
function fireConfetti(count=70){
  for(let i=0;i<count;i++){
    setTimeout(()=>{
      const el=document.createElement('div');
      el.className='confetti-piece';
      el.style.left=Math.random()*100+'vw';
      el.style.top='-20px';
      el.style.background=confettiColors[Math.floor(Math.random()*confettiColors.length)];
      el.style.transform=`rotate(${Math.random()*360}deg)`;
      el.style.animationDuration=(Math.random()*2+1.5)+'s';
      el.style.animationDelay=(Math.random()*.8)+'s';
      el.style.borderRadius=Math.random()>0.5?'50%':'2px';
      el.style.width=(Math.random()*8+6)+'px';
      el.style.height=(Math.random()*12+8)+'px';
      document.body.appendChild(el);
      setTimeout(()=>el.remove(),4000);
    }, i*30);
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// PHOTO helpers
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPlaceholder(){
  document.getElementById('photo-placeholder').style.display='flex';
  document.getElementById('valentine-photo').style.display='none';
}
function hidePlaceholder(){
  document.getElementById('photo-placeholder').style.display='none';
  document.getElementById('valentine-photo').style.display='block';
}

window.addEventListener('DOMContentLoaded',()=>{
  const img = document.getElementById('valentine-photo');
  if(!img.src || img.src === window.location.href){
    showPlaceholder();
  } else {
    img.style.display='block';
  }
});
</script>
</body>
</html>
